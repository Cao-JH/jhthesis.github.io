import{g as y,u as I,r as V,a as C,o as S,V as u,b as M,c,d as B,e as L,f as d,h as t,w as s,i as N,j as _,v as f,k as g,p as R,l as T,m as U}from"./index-29034bfe.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";const j=l=>(R("data-v-e122fcf8"),l=l(),T(),l),D={id:"loginContent"},E={class:"body"},J=j(()=>d("span",null,"管理员登录",-1)),O={__name:"Login",setup(l){const{proxy:b}=y(),i=b.message,m=I(),o=V({}),p=C();S(()=>{let r=u.get("token"),e=sessionStorage.getItem("token");M({token:r||e}).then(a=>{a.code==200&&m.replace("/inspextor/list")})});let k={account:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:12,message:"账号长度在3到12字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:18,message:"密码长度在6到18字符之间",trigger:"blur"}]};const v=async()=>{p.value.validate(async r=>{r?U(o).then(e=>{e.code==200&&(o.rememberMe==1?(u.set("token",e.data.token,"7d"),u.set("userInfo",JSON.stringify(e.data),"7d")):sessionStorage.setItem("token",e.data.token),i.success(e.msg))}).then(()=>{setTimeout(()=>{m.replace("/")},1500)}):i.warning("账号或密码错误!")})};return(r,e)=>{const a=c("el-form-item"),w=c("el-checkbox"),x=c("el-button"),h=c("el-form");return B(),L("div",D,[d("div",E,[J,t(h,{model:o,ref_key:"adminInfoRef",ref:p,rules:N(k)},{default:s(()=>[t(a,{label:"",prop:"account"},{default:s(()=>[_(d("input",{class:"account","onUpdate:modelValue":e[0]||(e[0]=n=>o.account=n),placeholder:"请输入账号"},null,512),[[f,o.account]])]),_:1}),t(a,{label:"",prop:"password"},{default:s(()=>[_(d("input",{class:"password","onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),placeholder:"请输入密码",type:"password","show-password":""},null,512),[[f,o.password]])]),_:1}),t(a,{label:""},{default:s(()=>[t(w,{modelValue:o.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=n=>o.rememberMe=n),label:!0},{default:s(()=>[g(" 记住我 ")]),_:1},8,["modelValue"])]),_:1}),t(a,null,{default:s(()=>[t(x,{class:"btn",type:"primary",onClick:v},{default:s(()=>[g("登陆")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},F=q(O,[["__scopeId","data-v-e122fcf8"]]);export{F as default};
